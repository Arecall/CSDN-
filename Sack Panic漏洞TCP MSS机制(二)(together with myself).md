---
title: Sack Panic漏洞TCP MSS机制(二)(together with myself)
date: 2019-07-07 21:05:53
tags: CSDN迁移
---
  没有一，哪有二？

 其实已经有一了，不过不是我写的：  
 _**Linux 内核 TCP MSS 机制详细分析**_ [https://paper.seebug.org/966/](https://paper.seebug.org/966/)

 作者原文几经update，终于上了点道，挺好的…我也就不喷了。

 不过我写这篇文章就是等着大家来喷的，虽然这是个小众的CSDN平台，但是但凡看到的仍然可以喷我。

 我就是直言不讳，我说的难听，同样也不能阻止别人说话难听，难听点好，良药！

 真正懂TCP/IP技术且真正懂Linux内核的，真的没多少人。我自己，但沾边儿，中上游吧。

 
--------
 _**把MSS变成8有那么难吗？**_

 太简单了啊！

 你看我不就把mss变成8了吗？而且还是中途从1460变成8的：  
 ![在这里插入图片描述](https://img-blog.csdnimg.cn/20190707190659849.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RvZzI1MA==,size_16,color_FFFFFF,t_70)

 想要代码逻辑吗？我不认为这有啥技术含量，这是常识，给出就是了：  
 ![在这里插入图片描述](https://img-blog.csdnimg.cn/20190707190757958.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RvZzI1MA==,size_16,color_FFFFFF,t_70)  
 Sack Panic出来之后，网上的中文分析没一个靠谱的，总结起来无外乎就是一大堆 _**Linux内核源码分析**_ ，你连TCP/IP的基本协议原理都不明白，都不知道这些协议是怎么工作的，光分析个静态代码就能分析出个所以然来？不过分析源代码这是圈子里的政治正确行为，人家可能会反怼，你连怎么实现的都不明白，还谈什么优化和扩展？！

 这么多人，包括H(w)BATJ(d)T(tiao)P(dd)的所谓牛人大拿全部上阵，结果很多人却堵在这个把mss凑成8这么简单的常识上！你说悲哀不悲哀！

 好吧，我承认，可能有人早就研究出来凑8方法了，但是这些人几乎可以肯定是属于某个公司，不然他可能早就放出来了，不放出来，那是因为公司竟然把常识当成了核心技术。但是即便如此，据我对国内技术圈的观察和理解，这种人并不多。

 我呢？我并不觉得这是什么核心技术，就像TCP三次握手那样，这是个常识，所以，就当科普了。

 我没啥水平，只是没事思考的多一些而已，大专毕业，也不是学这个专业的，一直都是业余再业余的水平，我连英文都拿捏不好，说实话，我很垃圾。

 但同样的道理，并不意味着其他那些业内自诩或公认的前辈牛人就真的都很厉害，说实话，他们很多人早就已经当经理财务自由了，谁还闲着没事研究什么技术细节，说真的，喜欢这一行的并不是很多。说真的，真正懂的人也不多。

 总之，国内技术圈的水平就是很low。厉害的人几乎都是搞Research的，真正会分析工程问题能解决工程问题的人，太少，且low。

 没办法，大家都是把这个当饭碗，断然结果如此。

 对了，我不是说仅仅在IT互联网行业绝大多数自诩厉害的实际都很low，而是所有行业。装修的知道吧，再牛逼的本土装修公司，其技术low的占多数，物业公司知道吧，牛逼哄哄的人最终其实连个台面裂缝都搞不定，宜家牛逼吧，显得高大上的家具组装工人其实就是雇佣的拉车的二道贩子…没办法，都加都忙着哄钱呢，谁还管什么专业不专业，谁还会钻研自己的手艺。

 
--------
 再看一个分析：  
 [https://paper.seebug.org/959/](https://paper.seebug.org/959/)  
 同样，在我看来，没有什么结论。

 这篇分析的问题在于把精力同样放在了凑8这件事上，却根本没提重点，即将17*32768给凑出来，看来作者可能连基本的拥塞窗口以及重传队列管理的基本概念都没弄明白，Linux内核sack处理的细节更是没有提及，这才是重点。相反，凑8这件事，再强调一遍，常识。

 那么我自己的呢？我确实写了，但后来删了，为了不惹麻烦，同时这次我真的也不想让人坐享其成了：

  
  * 拿着这个思路做了EXP造成了损失算谁的？ 
  * 攻击了我司服务器算谁的？ 
  * 万一这个荣耀，被人窃取了到底算谁的？  贴一个删改版的部分截图：  
 ![在这里插入图片描述](https://img-blog.csdnimg.cn/20190707194944654.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RvZzI1MA==,size_16,color_FFFFFF,t_70)

 删改版我也没有发出，在确认绝大多数公司都fix掉这个之后，自然会放出大家一起研究。据说一点，漏洞的利用条件非常苛刻，要对协议处理细节非常理解，其次才是实现的代码细节，如果一个CVE要是能被code reviewer轻易利用，那这个漏洞也太low了，换句话说，源码分析不是正道。先看《TCP/IP详解》卷一，才能看卷二，这也是为什么史蒂文森把源码分析作为卷二而保留卷一描述协议的原因。

 但是大家往往总是觉得卷二才牛逼。

 
--------
 你会说，这么牛逼啊。出去挑战啊，在这瞎逼逼干嘛！？

 我不牛逼，但在TCP/IP技术上稍微比大多数人牛逼那么一丢丢，而且我从来不把自己定位成一个技术研发人员，我觉得我是 _**在路上的人**_ 。除了技术，还有很多别的。

 不过话说作为IT技术人员，如果没有个高星的github，知乎上不活跃，那简直政治不正确，至于CSDN那是给在校生吹水的，至于微博，那都是明星戏子的平台。

 对了，新浪微博对于范冰冰就和github对于一个求职中的高级程序员一样，刷人气嘛。另外，直播平台可能对于冯提莫，周二珂，Miss游戏主播一样，就是那个圈子的github。这年头人气就是成功。

 但我有不同的想法，诗和远方来自 _**苟全性命于乱世，不求闻达于诸侯**_ 的看得开，而不是在于你有多少人气或者有多少钱。你有1000万粉丝之后，你会把精力全部放在如何获得2000万粉丝，然后将这些变现；如果有有年薪300万，你就会把所有精力全部放在如何年薪500万，如何年薪1000万，这样，你们永远也不会有诗和远方。

 诗和远方不需要多少钱，年薪50万够吗？不需要50万，30万甚至20万足矣，这样换来的是豁达，是见识，是过程的享受，是愉悦。

 不需要太大的房子，够住就好，这点我做到了，上海的房子不大，但够住，关键是贷款压力不大。不需要给孩子牛逼的学校，培养其自我驱动力，剩下的就不用管了，当然这点，我暂时还没有做到，不过相信会做到的。这些都不需要太多的钱，剩下的就是诗和远方了。

 当然，对于诗和远方的背后，能让你瞄准一件事做好它而无琐事杂念，它也是一种投资。如此一来，专业方向的技术，当然也就做精了。

 就我自己，声明一下。

 为什么不发github了？

 因为我不会编程？嗯，确实，我真的不怎么会编程，但还是稍微会一点的。但这不是主要原因，我不发github是因为：

  
  * github几乎成了简历作品库，一来我没有求职的需求，二来一个代码像屎的人在github上毫无存在感，我不求闻达于诸侯，但也无意自黑。 
  * github不适合做自己的备份仓库，指不定哪天就gg了，大家都懂。 
  * 有个写东西的地方就行，小时候是纸质日记本，现在已经写了很多CSDN了，另外本地备份。 
  * CSDN越来越小众，适合做记事，本来就不想这些东西传播嘛。  那么，我为什么不发知乎？

 知乎我早就有了，但知(B)乎是个较真儿的地方，一帮人吹水编故事，一本正经扯淡，适合上班路上刷十分钟，就像麻辣烫，毫无营养可言。而且非常混乱，对markdown支持的也不好。然而我是最讨厌其：

  
  * XX是一种什么体验。 
  * 我有一个朋友，真人真事系列。 
  * 无限分割线，没完没了。 
  * 狂，很狂。怼，猛怼。抬杠，还是抬杠。  当然，由于家人朋友同事都知道我有个CSDN博客却不知道我的知乎，有些不便于他们看到的内容，还是会发知乎的，嗯，180天改个昵称，就当是个匿名发泄平台吧。说多了就暴露了。

 那么为什么不自己搭建博客？

 说实话，一写日记我肯定是自己有硬盘的，Linux系统直接保存md文件即可，既然不求公开，就没有非得弄成博客的格式了。

 新浪微博呢？

 微博我也是有的，性质和知乎一样，没人知道我的微博账号，不断换昵称改资料，每个人都要有点自己的世界。说多了也会暴露。

 就剩下微信朋友圈了，天天皮鞋，无厘头轰炸，没有意义，赋予意义，偶尔也发表一些自己的观点，分组展示。

 很多人都会鄙视我的这些观点，同样，我也看不起或多或少的一些人，互相鄙视吧。古人都云过，文人总相轻，何况我们大家都是文盲呢，嗨皮。

 
--------
 浙江温州皮鞋湿，下雨进水不会胖！

   
  